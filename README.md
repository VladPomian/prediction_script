# Solar Activity Forecasting

Проект для получения и анализа данных о солнечной активности (CME, FLR, GST) с использованием NASA API, их обработки с помощью pandas и прогнозирования с использованием библиотеки Prophet. Результаты прогнозов сохраняются в формате XML с кодировкой base64.

## Описание

Этот проект собирает данные о солнечной активности, включая:
- **CME** (Coronal Mass Ejections) — выбросы корональной массы.
- **FLR** (Solar Flares) — солнечные вспышки.
- **GST** (Geomagnetic Storms) — геомагнитные бури.

Данные запрашиваются через API NASA DONKI, обрабатываются и используются для построения прогнозов на основе временных рядов с помощью библиотеки Prophet. Итоговый результат сохраняется в XML-формате с base64-кодировкой.

## Установка

### Требования

- Python 3.8+
- Git

### Зависимости

Для работы проекта необходимо установить следующие Python-библиотеки:

```bash
pip install requests pandas prophet xml.etree.ElementTree
```

### Установка проекта

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/VladPomian/prediction_script.git
   cd prediction_script
   ```

2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

3. Создайте файл `requirements.txt` с содержимым:
   ```
   requests
   pandas
   prophet
   ```

## Использование

1. **Получите API-ключ NASA**:
   - Зарегистрируйтесь на [NASA API](https://api.nasa.gov/) и получите API-ключ.
   - Замените значение переменной `api_key` в файле `main.py` на ваш ключ.

2. **Запустите скрипт**:
   ```bash
   python main.py
   ```

3. **Результат выполнения**:
   - Скрипт выведет строку, содержащую:
     - Закодированный в base64 XML с прогнозами.
     - Размер XML в байтах.
     - Статус выполнения (`Success` или `Failure`).

## Структура кода

- **main.py**: Основной скрипт, содержащий:
  - Запрос данных из NASA API (CME, FLR, GST).
  - Обработку данных с помощью pandas.
  - Парсинг координат солнечных вспышек (sourceLocation).
  - Преобразование классов вспышек (X, M, C) в числовую интенсивность.
  - Обучение модели Prophet для прогнозирования.
  - Генерацию XML с результатами прогнозов.

## Пример вывода

При успешном выполнении скрипт выведет строку вида:
```
<base64_encoded_xml> <xml_size> Success
```

Пример XML (декодированный):
```xml
<forecast_data>
  <CME>
    <record>
      <date>2025-10-25</date>
      <value>5.47</value>
    </record>
    ...
  </CME>
  <FLR>
    <record>
      <date>2025-10-25</date>
      <value>6.78</value>
    </record>
    ...
  </FLR>
  <GST>
    <record>
      <date>2025-10-25</date>
      <value>5.67</value>
    </record>
    ...
  </GST>
</forecast_data>
```

## Обработка ошибок

- Если запрос к API завершается неудачей, возвращается сообщение об ошибке.
- Если данные не удается обработать, скрипт возвращает XML с описанием ошибки, закодированный в base64.

## Ограничения

- Требуется действующий API-ключ NASA.
- Данные за период до 2012 года могут быть ограничены API.
- Прогнозы ограничены 365 днями вперед (настраивается в параметре `periods`).

## Контакты

Если у вас есть вопросы или предложения, создайте issue в репозитории или свяжитесь с автором: VladPomian.
